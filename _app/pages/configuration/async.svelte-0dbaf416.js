import{S as H,i as K,s as M,O as P,e as b,w as Q,k as y,l as F,c as v,a as N,x as U,d as _,m as S,b as W,g as C,y as X,P as Y,q as Z,o as z,B as x,J as ee,E as h,t as g,h as w,G as f,j as T}from"../../chunks/index-9e0b8dcf.js";import{F as te,D as ae,s as V}from"../../chunks/context-72a8e9a1.js";import"../../chunks/index-e8f161e7.js";function se(n){return{c:h,l:h,m:h,p:h,d:h}}function le(n){let e,t=n[8]&&J(n);return{c(){t&&t.c(),e=F()},l(s){t&&t.l(s),e=F()},m(s,c){t&&t.m(s,c),C(s,e,c)},p(s,c){s[8]?t?t.p(s,c):(t=J(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){t&&t.d(s),s&&_(e)}}}function J(n){let e,t,s,c,m=n[8].name+"",p,r,a,i,$,l,u=n[8].level+"",k,R,j,D,G,O,E=n[8].desc+"",B;return{c(){e=b("div"),t=b("strong"),s=g("Name:"),c=y(),p=g(m),r=b("br"),a=y(),i=b("strong"),$=g("Level:"),l=y(),k=g(u),R=b("br"),j=y(),D=b("strong"),G=g("Description:"),O=y(),B=g(E)},l(d){e=v(d,"DIV",{});var o=N(e);t=v(o,"STRONG",{});var I=N(t);s=w(I,"Name:"),I.forEach(_),c=S(o),p=w(o,m),r=v(o,"BR",{}),a=S(o),i=v(o,"STRONG",{});var q=N(i);$=w(q,"Level:"),q.forEach(_),l=S(o),k=w(o,u),R=v(o,"BR",{}),j=S(o),D=v(o,"STRONG",{});var L=N(D);G=w(L,"Description:"),L.forEach(_),O=S(o),B=w(o,E),o.forEach(_)},m(d,o){C(d,e,o),f(e,t),f(t,s),f(e,c),f(e,p),f(e,r),f(e,a),f(e,i),f(i,$),f(e,l),f(e,k),f(e,R),f(e,j),f(e,D),f(D,G),f(e,O),f(e,B)},p(d,o){o&1&&m!==(m=d[8].name+"")&&T(p,m),o&1&&u!==(u=d[8].level+"")&&T(k,u),o&1&&E!==(E=d[8].desc+"")&&T(B,E)},d(d){d&&_(e)}}}function ne(n){return{c:h,l:h,m:h,p:h,d:h}}function re(n){let e,t,s,c,m,p;t=new te({props:{form:n[1]}});let r={ctx:n,current:null,token:null,hasCatch:!1,pending:ne,then:le,catch:se,value:8};return P(m=n[0],r),{c(){e=b("div"),Q(t.$$.fragment),s=y(),c=F(),r.block.c(),this.h()},l(a){e=v(a,"DIV",{class:!0});var i=N(e);U(t.$$.fragment,i),i.forEach(_),s=S(a),c=F(),r.block.l(a),this.h()},h(){W(e,"class","w-1/5 py-2")},m(a,i){C(a,e,i),X(t,e,null),C(a,s,i),C(a,c,i),r.block.m(a,r.anchor=i),r.mount=()=>c.parentNode,r.anchor=c,p=!0},p(a,[i]){n=a,r.ctx=n,i&1&&m!==(m=n[0])&&P(m,r)||Y(r,n,i)},i(a){p||(Z(t.$$.fragment,a),p=!0)},o(a){z(t.$$.fragment,a),p=!1},d(a){a&&_(e),x(t),a&&_(s),a&&_(c),r.block.d(a),r.token=null,r=null}}}const A="https://www.dnd5eapi.co/api";function oe(n,e,t){let s,c,m,p={},r={};const a=ae.newForm([{type:"select",name:"class",label:"Class",schema:V(),options:async()=>(m||(m=await fetch(A+"/classes").then(l=>l.json())),[{label:"Select class...",value:""},...m.results.map(l=>({label:l.name,value:l.index}))])},{type:"select",name:"feature",label:"Spell",schema:V(),hide:l=>!("class"in l&&l.class),options:async l=>"class"in l&&l.class?(l.class in p||(p[l.class]=await fetch(A+"/classes/"+l.class+"/features").then(u=>u.json())),[{label:"Select feature...",value:""},...p[l.class].results.map(u=>({label:u.name,value:u.index}))]):[]}]),i=a.getData();ee(n,i,l=>t(3,c=l));const $=async l=>{const u=l.feature;if(u)return u in r||(r[u]=await fetch(A+"/features/"+u).then(k=>k.json())),r[u]};return n.$$.update=()=>{n.$$.dirty&8&&t(0,s=$(c))},[s,a,i,c]}class fe extends H{constructor(e){super(),K(this,e,oe,re,M,{})}}export{fe as default};
